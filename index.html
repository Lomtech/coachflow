<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="description" content="SaaS Platform f√ºr Coaches - Erstelle deine eigene Content-Plattform mit Paywall" />
    
    <!-- Cache-Control -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <title>CoachPlatform - Deine Content SaaS L√∂sung</title>
    <link rel="stylesheet" href="styles.css" />

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
  </head>
  <body>
    <!-- Cookie Consent Banner -->
    <div id="cookieConsent" class="cookie-banner" style="display: none">
      <div class="cookie-content">
        <div class="cookie-text">
          <h3>üç™ Cookie-Einstellungen</h3>
          <p>
            Wir verwenden Cookies f√ºr die bestm√∂gliche Erfahrung.
            <a href="datenschutz.html" target="_blank">Datenschutzerkl√§rung</a> |
            <a href="cookies.html" target="_blank">Cookie-Richtlinie</a>
          </p>
        </div>
        <div class="cookie-buttons">
          <button id="acceptAll" class="btn btn-primary">Alle akzeptieren</button>
          <button id="acceptEssential" class="btn btn-secondary">Nur Notwendige</button>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav>
      <div class="container">
        <a href="/" class="logo">üöÄ CoachPlatform</a>
        <div class="nav-buttons">
          <button id="loginBtn" class="btn btn-primary">Anmelden</button>
          <button id="logoutBtn" class="btn btn-secondary" style="display: none">Abmelden</button>
        </div>
      </div>
    </nav>

    <!-- ========================================= -->
    <!-- LANDING PAGE (nicht eingeloggt) -->
    <!-- ========================================= -->
    <div id="landingPage">
      <!-- Hero Section -->
      <section class="hero">
        <div class="container">
          <h1>Deine eigene Content-Plattform in Minuten</h1>
          <p>
            Verkaufe deine Videos, Dokumente und Bilder mit automatischer Paywall.
            Keine technischen Kenntnisse erforderlich. Starte noch heute!
          </p>
          <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 2rem;">
            <button id="startCoachBtn" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem">
              Als Coach starten ‚Üí
            </button>
            <button id="findCoachBtn" class="btn btn-secondary" style="font-size: 1.1rem; padding: 1rem 2rem">
              Coach finden
            </button>
          </div>
        </div>
      </section>

      <!-- Features Section -->
      <section style="padding: 4rem 1rem; background: white;">
        <div class="container">
          <h2 class="text-center" style="margin-bottom: 3rem;">Alles was du brauchst</h2>
          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-icon">üìπ</div>
              <h3>Video-Hosting</h3>
              <p>Lade Videos hoch und teile sie mit deinen Kunden</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üìÑ</div>
              <h3>Dokumente & PDFs</h3>
              <p>Teile Trainings pl√§ne, E-Books und mehr</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üñºÔ∏è</div>
              <h3>Bilder & Grafiken</h3>
              <p>√úbungskataloge, Infografiken und vieles mehr</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üí≥</div>
              <h3>Automatische Paywall</h3>
              <p>Stripe-Integration f√ºr sichere Zahlungen</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üìä</div>
              <h3>Analytics Dashboard</h3>
              <p>Verfolge Views, Einnahmen und Kunden</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üé®</div>
              <h3>Eigene Landing Page</h3>
              <p>Professionelle Seite mit deinem Branding</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Pricing Section f√ºr COACHES -->
      <section id="coachPricing">
        <div class="container">
          <h2 class="text-center">W√§hle deinen Coach-Plan</h2>
          <p class="text-center" style="color: #999; margin-bottom: 3rem">
            Starte als Coach und verkaufe deine Inhalte ‚Ä¢ 30 Tage Geld-zur√ºck-Garantie
          </p>

          <div class="pricing-cards">
            <!-- Basic Plan -->
            <div class="pricing-card">
              <h3>Basic</h3>
              <div class="price">‚Ç¨29<span>/Monat</span></div>
              <ul class="features">
                <li>10 Videos</li>
                <li>5 Dokumente</li>
                <li>20 Bilder</li>
                <li>5 GB Storage</li>
                <li>Bis zu 50 Kunden</li>
                <li>E-Mail Support</li>
              </ul>
              <button class="subscribe-btn" data-plan="basic" data-user-type="coach">
                Als Coach starten
              </button>
            </div>

            <!-- Premium Plan -->
            <div class="pricing-card featured">
              <div class="featured-badge">‚≠ê BELIEBT</div>
              <h3>Premium</h3>
              <div class="price">‚Ç¨59<span>/Monat</span></div>
              <ul class="features">
                <li>50 Videos</li>
                <li>20 Dokumente</li>
                <li>100 Bilder</li>
                <li>25 GB Storage</li>
                <li>Bis zu 200 Kunden</li>
                <li>Custom Domain</li>
                <li>Analytics Dashboard</li>
                <li>Vorrang-Support</li>
              </ul>
              <button class="subscribe-btn" data-plan="premium" data-user-type="coach">
                Premium w√§hlen
              </button>
            </div>

            <!-- Elite Plan -->
            <div class="pricing-card">
              <h3>Elite</h3>
              <div class="price">‚Ç¨99<span>/Monat</span></div>
              <ul class="features">
                <li>Unbegrenzte Videos</li>
                <li>Unbegrenzte Dokumente</li>
                <li>Unbegrenzte Bilder</li>
                <li>100 GB Storage</li>
                <li>Unbegrenzte Kunden</li>
                <li>Custom Domain & Branding</li>
                <li>Advanced Analytics</li>
                <li>24/7 Premium Support</li>
                <li>White-Label Option</li>
              </ul>
              <button class="subscribe-btn" data-plan="elite" data-user-type="coach">
                Elite w√§hlen
              </button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ========================================= -->
    <!-- COACH DASHBOARD (eingeloggt als Coach) -->
    <!-- ========================================= -->
    <div id="coachDashboard" style="display: none">
      <div class="container" style="padding: 2rem 1rem;">
        <!-- Coach Info Header -->
        <div class="dashboard-header">
          <div class="user-info" id="coachInfo">
            <!-- Wird von JavaScript gef√ºllt -->
          </div>
        </div>

        <!-- Dashboard Tabs -->
        <div class="tabs">
          <button class="tab-btn active" data-tab="overview">üìä √úbersicht</button>
          <button class="tab-btn" data-tab="upload">‚¨ÜÔ∏è Upload</button>
          <button class="tab-btn" data-tab="content">üìö Mein Content</button>
          <button class="tab-btn" data-tab="customers">üë• Kunden</button>
          <button class="tab-btn" data-tab="settings">‚öôÔ∏è Einstellungen</button>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
          <div class="stats-grid">
            <div class="stat-card">
              <h4>Aktive Kunden</h4>
              <div class="stat-number" id="totalCustomers">0</div>
            </div>
            <div class="stat-card">
              <h4>Gesamt Content</h4>
              <div class="stat-number" id="totalContent">0</div>
            </div>
            <div class="stat-card">
              <h4>Gesamt Views</h4>
              <div class="stat-number" id="totalViews">0</div>
            </div>
            <div class="stat-card">
              <h4>Monatlicher Umsatz</h4>
              <div class="stat-number" id="monthlyRevenue">‚Ç¨0</div>
            </div>
          </div>

          <!-- Chart/weitere Stats hier -->
          <div style="margin-top: 2rem;">
            <h3>Kunden nach Plan</h3>
            <div id="customersByPlan"></div>
          </div>
        </div>

        <!-- Upload Tab -->
        <div id="upload" class="tab-content">
          <div class="upload-section">
            <h2>Neuen Content hochladen</h2>
            
            <form id="uploadForm">
              <div class="form-group">
                <label>Content-Typ</label>
                <select id="uploadType" required>
                  <option value="">-- Bitte w√§hlen --</option>
                  <option value="video">üìπ Video</option>
                  <option value="document">üìÑ Dokument</option>
                  <option value="image">üñºÔ∏è Bild</option>
                </select>
              </div>

              <div class="form-group">
                <label>Titel</label>
                <input type="text" id="uploadTitle" required />
              </div>

              <div class="form-group">
                <label>Beschreibung</label>
                <textarea id="uploadDescription" rows="4"></textarea>
              </div>

              <div class="form-group">
                <label>Erforderlicher Plan</label>
                <select id="uploadPlan" required>
                  <option value="basic">Basic</option>
                  <option value="premium">Premium</option>
                  <option value="elite">Elite</option>
                </select>
              </div>

              <div class="form-group">
                <label>Datei hochladen</label>
                <div class="file-upload-area" id="fileUploadArea">
                  <input type="file" id="fileInput" accept="*/*" hidden />
                  <div class="upload-placeholder">
                    <p>üìÅ Klicke oder ziehe eine Datei hierher</p>
                    <p style="font-size: 0.9em; color: #999;">Max. 500 MB</p>
                  </div>
                  <div class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                      <div class="progress-fill" id="uploadProgress"></div>
                    </div>
                    <p id="uploadStatus">Hochladen...</p>
                  </div>
                </div>
              </div>

              <button type="submit" class="btn btn-primary" style="width: 100%;">
                Content hochladen
              </button>
            </form>
          </div>
        </div>

        <!-- Content Management Tab -->
        <div id="content" class="tab-content">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <h2>Mein Content</h2>
            <select id="filterContentType">
              <option value="all">Alle Typen</option>
              <option value="video">Videos</option>
              <option value="document">Dokumente</option>
              <option value="image">Bilder</option>
            </select>
          </div>
          <div class="content-grid" id="coachContentList">
            <!-- Wird von JavaScript gef√ºllt -->
          </div>
        </div>

        <!-- Customers Tab -->
        <div id="customers" class="tab-content">
          <h2>Meine Kunden</h2>
          <div class="customers-list" id="customersList">
            <!-- Wird von JavaScript gef√ºllt -->
          </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
          <h2>Einstellungen</h2>
          
          <div class="settings-section">
            <h3>Profil-Einstellungen</h3>
            <form id="profileSettingsForm">
              <div class="form-group">
                <label>Benutzername (URL)</label>
                <input type="text" id="coachUsername" placeholder="dein-name" />
                <p style="font-size: 0.9em; color: #999;">
                  Deine URL: <strong id="coachUrl">-</strong>
                </p>
              </div>

              <div class="form-group">
                <label>Name</label>
                <input type="text" id="coachName" />
              </div>

              <div class="form-group">
                <label>Bio</label>
                <textarea id="coachBio" rows="4"></textarea>
              </div>

              <button type="submit" class="btn btn-primary">
                Profil speichern
              </button>
            </form>
          </div>

          <div class="settings-section" style="margin-top: 3rem;">
            <h3>Abo verwalten</h3>
            <button class="btn btn-secondary" onclick="showManagePlanSection()">
              Plan √§ndern
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ========================================= -->
    <!-- CUSTOMER VIEW (Kunde schaut Coach-Content) -->
    <!-- ========================================= -->
    <div id="customerView" style="display: none">
      <div class="container" style="padding: 2rem 1rem;">
        <!-- Customer Info -->
        <div class="user-info" id="customerInfo">
          <!-- Wird von JavaScript gef√ºllt -->
        </div>

        <!-- Content Tabs -->
        <div class="tabs">
          <button class="tab-btn active" data-tab="customerVideos">üìπ Videos</button>
          <button class="tab-btn" data-tab="customerDocuments">üìÑ Dokumente</button>
          <button class="tab-btn" data-tab="customerImages">üñºÔ∏è Bilder</button>
        </div>

        <!-- Content Grid -->
        <div id="customerVideos" class="tab-content active">
          <div class="content-grid" id="customerVideoList"></div>
        </div>

        <div id="customerDocuments" class="tab-content">
          <div class="content-grid" id="customerDocumentList"></div>
        </div>

        <div id="customerImages" class="tab-content">
          <div class="content-grid" id="customerImageList"></div>
        </div>
      </div>
    </div>

    <!-- ========================================= -->
    <!-- MODALS -->
    <!-- ========================================= -->

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Anmelden</h2>
        <form id="loginForm">
          <div class="form-group">
            <label>E-Mail</label>
            <input type="email" id="loginEmail" required />
          </div>
          <div class="form-group">
            <label>Passwort</label>
            <input type="password" id="loginPassword" required />
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%">
            Anmelden
          </button>
          <div class="form-link">
            Noch kein Konto?
            <a href="#" id="showRegister">Jetzt registrieren</a>
          </div>
        </form>
      </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Registrieren</h2>
        
        <!-- User Type Selection -->
        <div class="user-type-selection" id="userTypeSelection">
          <button class="user-type-btn" data-type="coach">
            <div class="user-type-icon">üéì</div>
            <h3>Als Coach</h3>
            <p>Verkaufe deine Inhalte</p>
          </button>
          <button class="user-type-btn" data-type="customer">
            <div class="user-type-icon">üë§</div>
            <h3>Als Kunde</h3>
            <p>Zugriff auf Coach-Content</p>
          </button>
        </div>

        <!-- Registration Form (wird angezeigt nach User-Type-Auswahl) -->
        <form id="registerForm" style="display: none;">
          <input type="hidden" id="registerUserType" value="" />
          
          <div class="form-group">
            <label>Name</label>
            <input type="text" id="registerName" required />
          </div>
          <div class="form-group">
            <label>E-Mail</label>
            <input type="email" id="registerEmail" required />
          </div>
          <div class="form-group">
            <label>Passwort (min. 6 Zeichen)</label>
            <input type="password" id="registerPassword" required minlength="6" />
          </div>

          <!-- F√ºr Coaches: Username -->
          <div class="form-group" id="usernameGroup" style="display: none;">
            <label>Benutzername (f√ºr deine URL)</label>
            <input type="text" id="registerUsername" placeholder="dein-name" />
          </div>

          <!-- F√ºr Kunden: Coach ausw√§hlen -->
          <div class="form-group" id="coachSelectionGroup" style="display: none;">
            <label>Bei welchem Coach m√∂chtest du dich anmelden?</label>
            <input type="text" id="coachSearchInput" placeholder="Coach-Name oder Username suchen..." />
            <div id="coachSearchResults"></div>
          </div>

          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="acceptPrivacy" required />
              Ich akzeptiere die
              <a href="datenschutz.html" target="_blank">Datenschutzerkl√§rung</a>
              und <a href="agb.html" target="_blank">AGB</a>
            </label>
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%">
            Registrieren
          </button>
          <div class="form-link">
            <a href="#" id="backToUserTypeSelection">‚Üê Zur√ºck zur Auswahl</a>
          </div>
          <div class="form-link">
            Bereits registriert? <a href="#" id="showLogin">Jetzt anmelden</a>
          </div>
        </form>
      </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Zahlung</h2>
        <div id="paymentInfo">
          <!-- Wird von JavaScript gef√ºllt -->
        </div>
        <form id="paymentForm">
          <p style="color: #999; text-align: center; margin: 2rem 0">
            Du wirst zu Stripe weitergeleitet, um die Zahlung sicher abzuschlie√üen.
          </p>
          <button type="submit" class="btn btn-primary" style="width: 100%">
            Zur Zahlung
          </button>
        </form>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h4>CoachPlatform</h4>
            <p>Die einfachste Weg, deine Inhalte zu monetarisieren</p>
          </div>
          <div class="footer-section">
            <h4>Rechtliches</h4>
            <ul class="footer-links">
              <li><a href="impressum.html">Impressum</a></li>
              <li><a href="datenschutz.html">Datenschutz</a></li>
              <li><a href="cookies.html">Cookie-Richtlinie</a></li>
              <li><a href="agb.html">AGB</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>Support</h4>
            <ul class="footer-links">
              <li><a href="mailto:support@coachplatform.de">support@coachplatform.de</a></li>
              <li><a href="#" id="openCookieSettings">Cookie-Einstellungen</a></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2025 CoachPlatform. Alle Rechte vorbehalten.</p>
        </div>
      </div>
    </footer>

    <!-- App Script -->
    <script src="app-multitenant.js"></script>
  </body>
</html>